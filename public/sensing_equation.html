<!DOCTYPE html>
<html>

<head>
  <script id="Polyfill" src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script id="Markdown" src="https://cdn.jsdelivr.net/gh/markedjs/marked@bf1295a499c60abc096124ab33804071cb8d89fe/marked.min.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8" />

  <title>Physics</title>
  <link rel="icon" type="image/svg+xml" href="physics.svg">

  <script src="tools/canvas/shapes.js"></script>
  <script src="equations.js"></script>
  <link rel="stylesheet" type="text/css" href="physics.css" />
</head>

<body>
  <script id="SideBar" src="./sidebar/sidebar.js"></script>

  <div class="page">
    <svg id="top-leaves" style="position: absolute; width: 100%; right: 0; transform: translateY(-6%) translateX(6%); height: auto; pointer-events: none;" width="450.92" height="305.23" version="1.1" viewBox="0 0 119.3 80.759" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
      <g transform="matrix(1.0832 0 0 1.0832 .14346 -35.512)">
        <path style="stroke: #855E42" d="m-0.0019116 37.695s4.1367-3.1733 13.002-0.16969c2.2624 0.76648 13.795-1.0888 17.041-2.0695 8.6473-2.6128 24.1 8.3055 32.817 1.2358 4.9492-4.0138 25.625 4.3117 29.313 2.4397 3.9074-1.9832 21.858-6.8187 10.318 7.4387-3.3734 4.1678 7.5917 6.2225 0.53024 21.932-1.9503 4.3387 6.5831 12.008 0.66283 17.764-7.0054 6.8106 5.943 12.419-0.0479 19.662" fill="none" stroke="#000" stroke-linecap="round" stroke-width=".26459px"/>
        <g stroke-width=".24746" style="fill: #43751a; paint-order:stroke fill markers" stop-color="#000000">
          <path d="m8.7635 40.045c0.26305-0.85978 0.56728-1.9602 0.22926-2.8438-0.3387-0.88297-0.79272-0.74001-1.7103-0.96894-0.52984 0.78337-0.93835 0.97082-0.60049 1.8541 0.3384 0.88317 1.3653 1.4822 2.0815 1.9586z"/><path d="m18.907 40.267c-0.22866-0.86956-0.54891-1.9654-1.3013-2.539-0.75259-0.57268-1.0635-0.21224-1.9642 0.07584-0.03843 0.94494-0.2872 1.3193 0.46485 1.8927 0.75244 0.573 1.9408 0.54214 2.8006 0.5705z"/><path d="m23.36 34.332c-0.89177 0.11478-2.0198 0.29126-2.6854 0.9635-0.66482 0.67258-0.3474 1.0273-0.17771 1.9576 0.93213 0.15978 1.2713 0.45468 1.9368-0.21728 0.66512-0.6724 0.78753-1.8549 0.92636-2.7038z"/><path d="m57.477 35.958c-0.87778 0.19473-1.9853 0.4722-2.5876 1.2017-0.60146 0.72979-0.25336 1.0544-4.62e-4 1.9657 0.94274 0.07508 1.3071 0.3382 1.9093-0.39104 0.60178-0.72963 0.61707-1.9183 0.67878-2.7764z"/><path d="m50.235 40.848c-0.1493-0.88664-0.36941-2.0069-1.067-2.646-0.69787-0.63822-1.04-0.30728-1.9631-0.10162-0.1235 0.93762-0.40502 1.288 0.29226 1.9269 0.6977 0.63853 1.884 0.71497 2.7378 0.82075z"/><path d="m66.093 38.544c-0.51179-0.73925-1.1869-1.66-2.0899-1.9422-0.90289-0.28134-1.072 0.16359-1.8203 0.74187 0.28648 0.90129 0.18046 1.3381 1.0831 1.6203 0.90286 0.28169 2.0093-0.15304 2.8271-0.41991z"/><path d="m87.792 42.026c0.02216-0.89885 0.01926-2.0406-0.54393-2.8007-0.56367-0.75936-0.96252-0.49958-1.9078-0.47333-0.29967 0.89699-0.64272 1.1874-0.07977 1.9473 0.56343 0.75963 1.7136 1.0604 2.5315 1.3267z"/><path d="m100.55 65.458c0.82758 0.35146 1.8902 0.769 2.8043 0.52516 0.91353-0.24458 0.81879-0.71106 1.1423-1.5997-0.72371-0.6088-0.86745-1.0347-1.7812-0.79094-0.91369 0.24427-1.6167 1.2029-2.1654 1.8654z"/><path d="m106.49 72.524c-0.4101-0.80015-0.95832-1.8016-1.8164-2.2002-0.85806-0.39762-1.0842 0.0212-1.9021 0.49607 0.16548 0.93113 3e-3 1.3502 0.86061 1.7486 0.85798 0.39797 2.012 0.1125 2.8578-0.04452z"/><path d="m108.65 85.207c-0.0682-0.89653-0.18581-2.0322-0.82256-2.7319-0.63711-0.6989-1.0078-0.40035-1.9458-0.27927-0.20803 0.92256-0.52012 1.246 0.11624 1.9455 0.63691 0.69918 1.8114 0.88292 2.652 1.0657z"/><path d="m104.86 92.381c-0.18997-0.87882-0.46154-1.9878-1.1879-2.594-0.72656-0.60536-1.0531-0.259-1.9657-0.01099-0.0801 0.94232-0.34513 1.3053 0.38078 1.9114 0.7264 0.60568 1.915 0.62733 2.7727 0.69363z"/><path d="m108.37 99.645c-0.52518-0.7298-1.2171-1.638-2.1251-1.9037-0.90788-0.26478-1.0689 0.18317-1.8064 0.77504 0.30295 0.89588 0.20497 1.3345 1.1125 1.6002 0.90786 0.26513 2.0062-0.18977 2.819-0.47156z"/><path d="m105.95 107.34c0.18868-0.6507 0.40312-1.4825 0.0913-2.1322-0.31231-0.64916-0.68468-0.52809-1.4553-0.67039-0.41302 0.60198-0.74599 0.7549-0.43443 1.4043 0.31208 0.64933 1.1864 1.0647 1.7984 1.3983z" stop-color="#000000" stroke-width=".19519" style="paint-order:stroke fill markers"/><path d="m102.06 78.84c0.84687-0.30205 1.9114-0.71474 2.4186-1.5134 0.50631-0.79876 0.12063-1.0777-0.24333-1.9506-0.94477 0.04242-1.339-0.17342-1.8461 0.62479-0.50664 0.79864-0.37439 1.9801-0.32921 2.8391z"/><path d="m100.03 84.987c0.56699 0.69783 1.3108 1.564 2.2328 1.7761 0.92183 0.21122 1.0563-0.24538 1.758-0.87939-0.35481-0.87664-0.28268-1.3203-1.2042-1.5324-0.92182-0.21157-1.9917 0.30679-2.7866 0.63564z"/><path d="m99.6 97.066c0.88756-0.14382 2.0092-0.35704 2.6525-1.0507 0.64251-0.69395 0.31368-1.0381 0.11369-1.9624-0.93685-0.12925-1.2855-0.41286-1.9287 0.28039-0.64281 0.69377-0.72654 1.8796-0.83756 2.7327z"/><path d="m101.89 103.73c0.79856 0.17931 1.8184 0.37933 2.597 0.0114 0.778-0.36849 0.61684-0.77068 0.76115-1.6193-0.74765-0.42672-0.94609-0.78449-1.7244-0.41679-0.7782 0.36823-1.2508 1.3417-1.6338 2.0247z" stop-color="#000000" stroke-width=".22526" style="paint-order:stroke fill markers"/><path d="m108.65 59.701c-0.19762-0.87714-0.47879-1.9837-1.2104-2.5836-0.73179-0.59902-1.0553-0.24983-1.9657 0.0061-0.0719 0.94298-0.33383 1.3083 0.39738 1.908 0.73164 0.59934 1.9204 0.61065 2.7786 0.6695z"/><path d="m101.22 55.132c0.8135-0.38293 1.8329-0.89709 2.2601-1.7412 0.42632-0.84416 0.0153-1.0843-0.43168-1.9177-0.93618 0.134-1.3495-0.04256-1.7766 0.80121-0.42666 0.84408-0.18025 2.0071-0.0518 2.8577z"/><path d="m105.36 49.309c0.0222-0.89885 0.0193-2.0406-0.54393-2.8007-0.56366-0.75936-0.96252-0.49958-1.9078-0.47333-0.29967 0.89699-0.64272 1.1874-0.0798 1.9473 0.56343 0.75963 1.7136 1.0604 2.5315 1.3267z"/><path d="m101.76 42.958c0.84298 0.31272 1.9238 0.68058 2.8256 0.39463 0.90122-0.28666 0.78496-0.74824 1.067-1.6509-0.75115-0.57461-0.91448-0.99335-1.816-0.70755-0.90139 0.28634-1.5592 1.2766-2.0766 1.9638z"/><path d="m110.01 38.945c-0.57455-0.69161-1.3278-1.5496-2.252-1.7517-0.92407-0.20116-1.0536 0.25688-1.7483 0.89848 0.36432 0.87273 0.29697 1.3171 1.2208 1.5192 0.92405 0.20152 1.9882-0.32847 2.7794-0.66596z"/><path d="m101.08 39.783c-0.24604-0.8648-0.58826-1.954-1.352-2.5124-0.76395-0.55744-1.0675-0.19082-1.9623 0.1153-0.01943 0.94552-0.26063 1.3248 0.5028 1.883 0.7638 0.55777 1.9514 0.50302 2.8115 0.51409z"/><path d="m94.175 34.605c-0.66307 0.60726-1.4838 1.401-1.6411 2.3339-0.15637 0.93269 0.30738 1.04 0.98174 1.703 0.85414-0.40599 1.3013-0.36015 1.4585-1.2927 0.15673-0.9327-0.42397-1.97-0.79922-2.7441z"/><path d="m72.073 32.907c-0.89456 0.09041-2.027 0.23605-2.7107 0.88986-0.68292 0.6542-0.3753 1.0174-0.23106 1.9521 0.92742 0.18516 1.2584 0.4892 1.942-0.16435 0.68322-0.654 0.83785-1.8327 0.99979-2.6776z"/><path d="m75.106 39.181c-0.07054-0.89635-0.19102-2.0317-0.8295-2.7298-0.63888-0.69727-1.0089-0.39778-1.9464-0.27431-0.20569 0.92308-0.517 1.2473 0.12122 1.9452 0.63868 0.69756 1.8137 0.87831 2.6547 1.0589z"/><path d="m83.894 36.042c-0.85304-0.28416-1.9456-0.61543-2.8373-0.29929-0.89105 0.31684-0.75932 0.77424-1.0108 1.6859 0.77006 0.549 0.94739 0.962 1.8388 0.64602 0.89124-0.31653 1.5154-1.3283 2.0093-2.0326z"/><path d="m44.165 34.504c-0.8802-0.18347-2.0038-0.38597-2.8529 0.03131-0.84836 0.41789-0.66455 0.85696-0.80876 1.7916 0.82846 0.45612 1.0524 0.84581 1.9012 0.42872 0.84859-0.41762 1.3514-1.4949 1.7604-2.2516z"/><path d="m31.638 32.784c-0.89177 0.11478-2.0198 0.29126-2.6854 0.9635-0.66482 0.67258-0.3474 1.0273-0.17771 1.9576 0.93213 0.15978 1.2713 0.45468 1.9368-0.21728 0.66512-0.6724 0.78753-1.8549 0.92636-2.7038z"/><path d="m28.478 39.011c-0.1651-0.88383-0.40518-2-1.114-2.6266-0.70915-0.62566-1.0453-0.28867-1.9646-0.06656-0.10674 0.93968-0.38196 1.295 0.32661 1.9214 0.70898 0.62598 1.8965 0.68123 2.752 0.77176z"/><path d="m37.96 37.691c-0.26112-0.86037-0.62226-1.9435-1.3956-2.4884-0.77355-0.54404-1.0707-0.17219-1.96 0.14948-3e-3 0.94572-0.2375 1.3291 0.53554 1.8739 0.77341 0.54437 1.9598 0.46894 2.82 0.46502z"/><path d="m14.997 35.299c-0.87773-0.19498-1.9986-0.41217-2.8531-0.0061-0.85376 0.40675-0.67572 0.84819-0.83215 1.7809 0.82242 0.46693 1.0413 0.85952 1.8954 0.45358 0.85398-0.40647 1.3708-1.4771 1.7898-2.2284z"/>
        </g>
      </g>
    </svg>
    <article class="page-content">
      <div class="markdown">
        ## comparing and understanding the equation differences

        "Mine charge" is my force calculation between two electrons

        "Mine wire" is my force calculation between two wire parts (electrong + protons in each wire)

        "Their force" is the force with the right hand law calculation
      </div>
      <div style="justify-content: space-around; display: flex;">
        <span class="markdown"># Mine charge</span>
        <span class="markdown"># Mine wire</span>
        <span class="markdown"># Their force</span>
      </div>
      <div style="overflow: auto;">
        <canvas-video name="speed_rotation_1_mine_particle" start="125" style="width: 32%; float: left;"></canvas-video>
        <canvas-video name="speed_rotation_1_mine_wire" start="125" style="width: 32%; float: left;"></canvas-video>
        <canvas-video name="speed_rotation_1_their" start="125" style="width: 32%; float: left;"></canvas-video>
      </div>
      <br />
      <div style="overflow: auto;">
        <canvas-video name="rotate_mirror_mine_particle" start="125" style="width: 32%; float: left;"></canvas-video>
        <canvas-video name="rotate_mirror_mine_wire" start="125" style="width: 32%; float: left;"></canvas-video>
        <canvas-video name="rotate_mirror_their" start="125" style="width: 32%; float: left;"></canvas-video>
      </div>
      <br />
      <div style="overflow: auto;">
        <canvas-video name="rotate_sync_mine_particle" start="125" style="width: 32%; float: left;"></canvas-video>
        <canvas-video name="rotate_sync_mine_wire" start="125" style="width: 32%; float: left;"></canvas-video>
        <canvas-video name="rotate_sync_their" start="125" style="width: 32%; float: left;"></canvas-video>
      </div>
      <br />
      <div style="overflow: auto;">
        <canvas-video name="spin_around_mine_particle" start="125" style="width: 32%; float: left;"></canvas-video>
        <canvas-video name="spin_around_mine_wire" start="125" style="width: 32%; float: left;"></canvas-video>
        <canvas-video name="spin_around_their" start="125" style="width: 32%; float: left;"></canvas-video>
      </div>
    </article>
    <svg id="bottom-leaves" style="position: absolute; width: 100%; right: 0; bottom: 0; transform: scaleY(-1) translateY(-41%) translateX(2%); height: auto; pointer-events: none;" width="449.17" height="41.386" version="1.1" viewBox="0 0 118.84 10.95" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
      <g transform="matrix(1.1245 0 0 1.1245 .14779 -36.866)">
        <path style="stroke: #855E42" d="m-0.0019116 37.695s4.1367-3.1733 13.002-0.16969c2.2624 0.76648 13.795-1.0888 17.041-2.0695 8.6473-2.6128 24.1 8.3055 32.817 1.2358 4.9492-4.0138 25.625 4.3117 29.313 2.4397 7.67-2.777 8.7027-2.9332 12.045 3.0427" fill="none" stroke="#000" stroke-linecap="round" stroke-width=".26459px"/>
        <g stroke-width=".24746" style="fill: #43751a; paint-order:stroke fill markers" stop-color="#000000">
          <path d="m8.7635 40.045c0.26305-0.85978 0.56728-1.9602 0.22926-2.8438-0.3387-0.88297-0.79272-0.74001-1.7103-0.96894-0.52984 0.78337-0.93835 0.97082-0.60049 1.8541 0.3384 0.88317 1.3653 1.4822 2.0815 1.9586z"/><path d="m18.907 40.267c-0.22866-0.86956-0.54891-1.9654-1.3013-2.539-0.75259-0.57268-1.0635-0.21224-1.9642 0.07584-0.03843 0.94494-0.2872 1.3193 0.46485 1.8927 0.75244 0.573 1.9408 0.54214 2.8006 0.5705z"/><path d="m23.36 34.332c-0.89177 0.11478-2.0198 0.29126-2.6854 0.9635-0.66482 0.67258-0.3474 1.0273-0.17771 1.9576 0.93213 0.15978 1.2713 0.45468 1.9368-0.21728 0.66512-0.6724 0.78753-1.8549 0.92636-2.7038z"/><path d="m57.477 35.958c-0.87778 0.19473-1.9853 0.4722-2.5876 1.2017-0.60146 0.72979-0.25336 1.0544-4.62e-4 1.9657 0.94274 0.07508 1.3071 0.3382 1.9093-0.39104 0.60178-0.72963 0.61707-1.9183 0.67878-2.7764z"/><path d="m50.235 40.848c-0.1493-0.88664-0.36941-2.0069-1.067-2.646-0.69787-0.63822-1.04-0.30728-1.9631-0.10162-0.1235 0.93762-0.40502 1.288 0.29226 1.9269 0.6977 0.63853 1.884 0.71497 2.7378 0.82075z"/><path d="m66.093 38.544c-0.51179-0.73925-1.1869-1.66-2.0899-1.9422-0.90289-0.28134-1.072 0.16359-1.8203 0.74187 0.28648 0.90129 0.18046 1.3381 1.0831 1.6203 0.90286 0.28169 2.0093-0.15304 2.8271-0.41991z"/><path d="m87.792 42.026c0.02216-0.89885 0.01926-2.0406-0.54393-2.8007-0.56367-0.75936-0.96252-0.49958-1.9078-0.47333-0.29967 0.89699-0.64272 1.1874-0.07977 1.9473 0.56343 0.75963 1.7136 1.0604 2.5315 1.3267z"/><path d="m101.08 39.783c-0.24604-0.8648-0.58826-1.954-1.352-2.5124-0.76395-0.55744-1.0675-0.19082-1.9623 0.1153-0.01943 0.94552-0.26063 1.3248 0.5028 1.883 0.7638 0.55777 1.9514 0.50302 2.8115 0.51409z"/><path d="m102.08 42.522c0.51822-0.4078 1.1625-0.9398 1.3389-1.547 0.1758-0.60698-0.15057-0.66596-0.59074-1.0798-0.64197 0.28195-0.96055 0.2623-1.137 0.86922-0.176 0.607 0.17137 1.2652 0.38879 1.7575z" stop-color="#000000" stroke-width=".16855" style="paint-order:stroke fill markers"/><path d="m105.55 41.371c-0.36776-0.30953-0.84283-0.69063-1.3023-0.72672-0.45925-0.03565-0.45305 0.20603-0.68327 0.58145 0.29626 0.41649 0.32937 0.64678 0.78869 0.68288 0.4593 0.03579 0.87765-0.30956 1.1969-0.53761z" stop-color="#000000" stroke-width=".12286" style="paint-order:stroke fill markers"/><path d="m94.175 34.605c-0.66307 0.60726-1.4838 1.401-1.6411 2.3339-0.15637 0.93269 0.30738 1.04 0.98174 1.703 0.85414-0.40599 1.3013-0.36015 1.4585-1.2927 0.15673-0.9327-0.42397-1.97-0.79922-2.7441z"/><path d="m72.073 32.907c-0.89456 0.09041-2.027 0.23605-2.7107 0.88986-0.68292 0.6542-0.3753 1.0174-0.23106 1.9521 0.92742 0.18516 1.2584 0.4892 1.942-0.16435 0.68322-0.654 0.83785-1.8327 0.99979-2.6776z"/><path d="m75.106 39.181c-0.07054-0.89635-0.19102-2.0317-0.8295-2.7298-0.63888-0.69727-1.0089-0.39778-1.9464-0.27431-0.20569 0.92308-0.517 1.2473 0.12122 1.9452 0.63868 0.69756 1.8137 0.87831 2.6547 1.0589z"/><path d="m83.894 36.042c-0.85304-0.28416-1.9456-0.61543-2.8373-0.29929-0.89105 0.31684-0.75932 0.77424-1.0108 1.6859 0.77006 0.549 0.94739 0.962 1.8388 0.64602 0.89124-0.31653 1.5154-1.3283 2.0093-2.0326z"/><path d="m44.165 34.504c-0.8802-0.18347-2.0038-0.38597-2.8529 0.03131-0.84836 0.41789-0.66455 0.85696-0.80876 1.7916 0.82846 0.45612 1.0524 0.84581 1.9012 0.42872 0.84859-0.41762 1.3514-1.4949 1.7604-2.2516z"/><path d="m31.638 32.784c-0.89177 0.11478-2.0198 0.29126-2.6854 0.9635-0.66482 0.67258-0.3474 1.0273-0.17771 1.9576 0.93213 0.15978 1.2713 0.45468 1.9368-0.21728 0.66512-0.6724 0.78753-1.8549 0.92636-2.7038z"/><path d="m28.478 39.011c-0.1651-0.88383-0.40518-2-1.114-2.6266-0.70915-0.62566-1.0453-0.28867-1.9646-0.06656-0.10674 0.93968-0.38196 1.295 0.32661 1.9214 0.70898 0.62598 1.8965 0.68123 2.752 0.77176z"/><path d="m37.96 37.691c-0.26112-0.86037-0.62226-1.9435-1.3956-2.4884-0.77355-0.54404-1.0707-0.17219-1.96 0.14948-3e-3 0.94572-0.2375 1.3291 0.53554 1.8739 0.77341 0.54437 1.9598 0.46894 2.82 0.46502z"/><path d="m14.997 35.299c-0.87773-0.19498-1.9986-0.41217-2.8531-0.0061-0.85376 0.40675-0.67572 0.84819-0.83215 1.7809 0.82242 0.46693 1.0413 0.85952 1.8954 0.45358 0.85398-0.40647 1.3708-1.4771 1.7898-2.2284z"/>
        </g>
      </g>
    </svg>
  </div>

  <script async>
    // Parse markdown
    document.querySelectorAll('.markdown').forEach(elmNode => {
      fisrt_spaces = elmNode.innerHTML.match(/^\n*( *)[^ ]/)[1]
      elmNode.innerHTML = marked.parse(elmNode.innerHTML.replace(new RegExp("\n" + fisrt_spaces, "g"), "\n"))
    });
  </script>
  <script type="module">
    const pi = Math.PI

    function vec_to_euler(vector) {
      return new THREE.Euler().setFromRotationMatrix(new THREE.Matrix4().lookAt(vector, new THREE.Vector3(0,0,0), new THREE.Vector3(0,1,0)))
    }

    window.calc_force_init = function (toolbar, scene) {
      // draw shapes
      const wire_shape = new THREE.TorusGeometry( 150, 10, 20, 50 )
      
      const wire1 = new THREE.Group()
      const wire1_material = new THREE.MeshBasicMaterial({ color: 0x3e8207 })
      wire1.name = "wire1"

      // draw circle wire
      const wire1_shape = new THREE.Mesh(wire_shape, wire1_material)
      wire1_shape.name = "wire_shape"
      wire1.add(wire1_shape)

      // draw current flow
      const arrow_1 = new THREE.Mesh(new THREE.ConeGeometry( 25, 55, 32 ), wire1_material)
      arrow_1.position.y = 150
      arrow_1.rotation.z = -pi / 2
      wire1.add(arrow_1)

      const arrow_2 = new THREE.Mesh(new THREE.ConeGeometry( 25, 55, 32 ), wire1_material)
      arrow_2.position.y = -150
      arrow_2.rotation.z = pi / 2
      wire1.add(arrow_2)

      const arrow_3 = new THREE.Mesh(new THREE.ConeGeometry( 25, 55, 32 ), wire1_material)
      arrow_3.position.x = 150
      arrow_3.rotation.z = pi
      wire1.add(arrow_3)

      const arrow_4 = new THREE.Mesh(new THREE.ConeGeometry( 25, 55, 32 ), wire1_material)
      arrow_4.position.x = -150
      wire1.add(arrow_4)

      // transform the whole shape
      wire1.rotation.x = pi/2
      wire1.position.y = 200
      scene.add(wire1)

      // duplicate to wire2
      const wire2_material = new THREE.MeshBasicMaterial({ color: 0x6898cc })
      const wire2 = wire1.clone()
      wire2.name = "wire2";
      wire2.position.y = -200
      wire2.traverse((node) => { if (node.isMesh) { node.material = wire2_material } })
      scene.add(wire2)

      // voltage text
      const voltage = document.createElement('div');
      toolbar.parentElement.appendChild(voltage);
      voltage.style.position = 'absolute';
      voltage.innerHTML = "(blue wire) Voltage: 0";
      voltage.style.top = (toolbar.parentElement.children[0].offsetHeight - voltage.offsetHeight)+'px';
      voltage.style.left = '5%';
      voltage.style.pointerEvents = 'none';
      wire2.voltage = voltage

      // speed arrows
      const wire1_stable = new THREE.Group()
      wire1_stable.name = "wire1_stable"
      wire1_stable.rotation.copy(wire1.rotation.clone().set(-wire1.rotation.x, -wire1.rotation.y, -wire1.rotation.z))
      wire1.add(wire1_stable)

      const speed_1 = new THREE.ArrowHelper(new THREE.Vector3(1,0,0), new THREE.Vector3(0,0,150), 0, wire1_material.color)
      wire1_stable.add(speed_1)

      const speed_2 = new THREE.ArrowHelper(new THREE.Vector3(1,0,0), new THREE.Vector3(0,0,-150), 0, wire1_material.color)
      wire1_stable.add(speed_2)

      const speed_3 = new THREE.ArrowHelper(new THREE.Vector3(1,0,0), new THREE.Vector3(150,0,0), 0, wire1_material.color)
      wire1_stable.add(speed_3)

      const speed_4 = new THREE.ArrowHelper(new THREE.Vector3(1,0,0), new THREE.Vector3(-150,0,0), 0, wire1_material.color)
      wire1_stable.add(speed_4)

      // total force arrows
      const force_on_1 = new THREE.ArrowHelper(new THREE.Vector3(1,0,0), wire1.position, 0, wire2_material.color)
      force_on_1.name = "force_on_1"
      scene.add(force_on_1)

      const force_on_2 = new THREE.ArrowHelper(new THREE.Vector3(1,0,0), wire2.position, 0, wire1_material.color)
      force_on_2.name = "force_on_2"
      scene.add(force_on_2)

      // rotation force arrows
      const circle = new THREE.EllipseCurve(0, 0, 80, 80, 0, 3/2 * pi, false)
      const curve_1_body = new THREE.Line(new THREE.BufferGeometry().setFromPoints( circle.getSpacedPoints(10) ))
      const curve_1_head = new THREE.Mesh(new THREE.ConeGeometry( 15, 40, 32 ))
      curve_1_head.position.y = -80
      curve_1_head.rotation.z = -pi / 2

      const curve_1 = new THREE.Group()
      curve_1.add(curve_1_body)
      curve_1.add(curve_1_head)
      const curve_2 = curve_1.clone()
      curve_2.traverse((node) => { if (node.isMesh) { node.material = node.material.clone() } })

      curve_1.name = "curve_1"
      curve_2.name = "curve_2"

      curve_1.position.set(wire1.position.x, wire1.position.y, wire1.position.z)
      curve_2.position.set(wire2.position.x, wire2.position.y, wire2.position.z)

      curve_1.children.forEach(child => { child.material.color.set(wire2_material.color) })
      curve_2.children.forEach(child => { child.material.color.set(wire1_material.color) })

      curve_1.scale.setScalar(0)
      curve_2.scale.setScalar(0)

      scene.add(curve_1)
      scene.add(curve_2)

      // create force toggle
      const toggle_force = document.createElement('label');
      toggle_force.style.height = "20%";
      toggle_force.style.width = "60%";
      toggle_force.style.margin = "20%";
      toggle_force.classList.add("switch");
      toolbar.children[0].append(toggle_force);

      const input = document.createElement('input');
      input.classList.add("force_type");
      input.type = "checkbox";
      toggle_force.append(input);

      const span = document.createElement('span');
      span.classList.add("slider");
      span.classList.add("round");
      toggle_force.append(span);
      
      const p = document.createElement('p');
      span.append(p);


      // create slidebars
      toolbar.style.height = toolbar.offsetWidth/3+"px";

      const slidebars = document.createElement('div');
      slidebars.style.width = "85%";
      slidebars.style.height = "100%";
      slidebars.style.textAlign = "center";
      toolbar.append(slidebars);

      wire1.speed = new THREE.Vector3( );
      function update_speeds() {
        const length = wire1.speed.length()*25
        speed_1.setLength(length, length*0.2, length*0.2)
        speed_2.setLength(length, length*0.2, length*0.2)
        speed_3.setLength(length, length*0.2, length*0.2)
        speed_4.setLength(length, length*0.2, length*0.2)
        speed_1.setDirection(wire1.speed.clone().normalize())
        speed_2.setDirection(wire1.speed.clone().normalize())
        speed_3.setDirection(wire1.speed.clone().normalize())
        speed_4.setDirection(wire1.speed.clone().normalize())
      }

      const inputs = {
        "R_1": function () { wire1.rotation.x = this.value/100*pi*2 + pi/2 },
        "R_2": function () { wire1.rotation.y = this.value/100*pi*2 },
        "R_3": function () { wire2.rotation.y = this.value/100*pi*2 },
        "V_x": function () { wire1.speed.x = (this.value-50)/10; update_speeds() },
        "V_y": function () { wire1.speed.y = (this.value-50)/10; update_speeds() },
        "V_z": function () { wire1.speed.z = (this.value-50)/10; update_speeds() }
      }
      const height = slidebars.offsetHeight / (Object.keys(inputs).length);
      slidebars.style.fontSize = height*0.8 + "px";
      for(const name in inputs) {
        const part = document.createElement('div');
        part.innerText = name + ": ";
        slidebars.append(part);

        const slidebar = document.createElement('input');
        slidebar.type = 'range';
        slidebar.value = /^V_.$/.test(name) ? 50 : 0;
        slidebar.min = 0;
        slidebar.max = 100;
        slidebar.style.width = "60%";
        slidebar.style.verticalAlign = "middle";
        slidebar.classList.add("measure_slide");
        part.append(slidebar);

        slidebar.onchange = inputs[name];
        slidebar.oninput = inputs[name];
      }
    }

    window.calc_force = function (toolbar, scene) {
      const wire1 = {}
      const wire2 = {}

      const wire1_mesh   = scene.getObjectByName("wire1")
      const wire2_mesh   = scene.getObjectByName("wire2")
      const force_on_1   = scene.getObjectByName("force_on_1")
      const force_on_2   = scene.getObjectByName("force_on_2")
      const curve_1      = scene.getObjectByName("curve_1")
      const curve_2      = scene.getObjectByName("curve_2")
      const wire1_stable = scene.getObjectByName("wire1_stable")

      wire1.radius = wire1_mesh.getObjectByName("wire_shape").geometry.parameters.radius
      wire1.position = wire1_mesh.position
      wire1.rotation = new THREE.Vector3(0, 0, 1).applyEuler(wire1_mesh.rotation)
      const abs_rotation = new THREE.Euler(wire1_mesh.rotation.x + wire1_stable.rotation.x, wire1_mesh.rotation.z + wire1_stable.rotation.z, wire1_mesh.rotation.y + wire1_stable.rotation.y, "XYZ")
      wire1.speed = wire1_mesh.speed.clone().applyEuler(abs_rotation)

      wire2.radius = wire2_mesh.getObjectByName("wire_shape").geometry.parameters.radius
      wire2.position = wire2_mesh.position
      wire2.rotation = new THREE.Vector3(0, 0, 1).applyEuler(wire2_mesh.rotation)
      wire2.voltage = 0

      const mine_force = toolbar.children[0].children[1].children[0].checked
      const voltage = wire2_mesh.voltage

      const F_1_T = new THREE.Vector3()
      const F_2_T = new THREE.Vector3()
      const F_1_rotating_T = new THREE.Vector3()
      const F_2_rotating_T = new THREE.Vector3()
      let parts = 100

      // creating new axis on circles
      const new_x_1 = Math.round(wire1.rotation.x, 4) == 0 ? wire1.rotation.clone().cross(new THREE.Vector3(1,0,0)) : wire1.rotation.clone().cross(new THREE.Vector3(0,1,0))
      new_x_1.normalize()
      const new_y_1 = wire1.rotation.clone().cross(new_x_1)
      const radius_1_x = new_x_1.clone().multiplyScalar(wire1.radius)
      const radius_1_y = new_y_1.clone().multiplyScalar(wire1.radius)

      const new_x_2 = Math.round(wire2.rotation.x, 4) == 0 ? wire2.rotation.clone().cross(new THREE.Vector3(1,0,0)) : wire2.rotation.clone().cross(new THREE.Vector3(0,1,0))
      new_x_2.normalize()
      const new_y_2 = wire2.rotation.clone().cross(new_x_2)
      const radius_2_x = new_x_2.clone().multiplyScalar(wire2.radius)
      const radius_2_y = new_y_2.clone().multiplyScalar(wire2.radius)

      let area_value = 0
      const areas = []
      if (!mine_force) {
        // calculate which parts are in the circle
        // step = sqrt(circle area / square area) * whole distance to make / in how much steps
        const step = Math.sqrt((wire2.radius*wire2.radius*pi) / (2*wire2.radius*2*wire2.radius)) * (2*wire2.radius) / Math.sqrt(parts)
        let height = -wire2.radius
        let width = -wire2.radius

        while (height < wire2.radius) {
          if (Math.hypot(width, height) <= wire2.radius) {
            areas.push(new_x_2.clone().multiplyScalar(width).add(new_y_2.clone().multiplyScalar(height)).add(wire2.position))
          }

          width += step
          if (width > wire2.radius) {
            width = -wire2.radius
            height += step
          }
        }
        parts = areas.length
        area_value = step*step
      }
      for (let part1 = 0; part1 < parts; part1++) {
        for (let part2 = 0; part2 < parts; part2++) {
          const alpha = 2*pi * part1/parts;
          const beta  = 2*pi * part2/parts;

          const relative_place_1 = radius_1_x.clone().multiplyScalar(Math.sin(alpha)).add(radius_1_y.clone().multiplyScalar(Math.cos(alpha)));
          const relative_place_2 = radius_2_x.clone().multiplyScalar(Math.sin(beta)).add(radius_2_y.clone().multiplyScalar(Math.cos(beta)));

          const v_1 = wire1.rotation.clone().cross(relative_place_1).normalize();
          const v_2 = wire2.rotation.clone().cross(relative_place_2).normalize();

          const absolute_place_1 = wire1.position.clone().add(relative_place_1)
          const absolute_place_2 = wire2.position.clone().add(relative_place_2)

          const R = absolute_place_1.clone().sub(absolute_place_2)
          const R_hat = R.clone().normalize()

          let f_1 = null
          let f_2 = null

          if (mine_force) {
            // TODO when i will add constants into the equations, notice that my v_1 and v_2 values are always 1, and i relay on that in some calculations. so just muliply the apropiate q for the matching I.

            // full "mine" force calculation
            const v_1_n = v_1.clone().add(wire1.speed)
            const v_2_n = v_2
            const v_1_p = wire1.speed.clone()
            const v_2_p = new THREE.Vector3()

            const top_p_n = + Math.pow(v_1_p.clone().sub(v_2_n).length(), 2) - 3/2*Math.pow(v_1_p.clone().dot(R_hat) - v_2_n.clone().dot(R_hat), 2)
            const top_n_p = + Math.pow(v_1_n.clone().sub(v_2_p).length(), 2) - 3/2*Math.pow(v_1_n.clone().dot(R_hat) - v_2_p.clone().dot(R_hat), 2)
            const top_n_n = - Math.pow(v_1_n.clone().sub(v_2_n).length(), 2) + 3/2*Math.pow(v_1_n.clone().dot(R_hat) - v_2_n.clone().dot(R_hat), 2)
            const top_p_p = - Math.pow(v_1_p.clone().sub(v_2_p).length(), 2) + 3/2*Math.pow(v_1_p.clone().dot(R_hat) - v_2_p.clone().dot(R_hat), 2)

            f_2 = R_hat.clone().multiplyScalar( (top_p_n + top_n_p + top_n_n + top_p_p) / (Math.pow(R.length(), 2)) )
            f_1 = f_2.clone().negate()

            // check whats f_positive_2 - f_positive_1 to know the forces difference for the voltage
            // const field_difference = R_hat.clone().multiplyScalar( ((top_p_n + top_n_n) - (top_n_p + top_p_p)) / (Math.pow(R.length(), 2)) )
            const field_difference = R_hat.clone().multiplyScalar( (top_p_n + top_n_n) / (Math.pow(R.length(), 2)) )
            // check its vlue in the wire direction because on other directions the electricity cant flow
            const field_difference_in_wire_direction = field_difference.clone().dot(v_2.clone().normalize())
            const distance = 2*pi*wire2.radius / parts
            // voltage = how much energy it takes to move a 1 charge from point A to point B
            wire2.voltage += field_difference_in_wire_direction * distance
          } else {
            // "their" force calculation
            f_1 = v_2.clone().cross(R_hat.clone().negate()).cross(v_1).divideScalar(Math.pow(R.length(), 2))
            f_2 = v_1.clone().cross(R_hat                 ).cross(v_2).divideScalar(Math.pow(R.length(), 2))

            const dt = 0.00001
            const area_place = areas[part2]

            const R_A_old = absolute_place_1.clone().sub(area_place)
            const R_A_hat_old = R_A_old.clone().normalize()
            const old_flux = v_1.clone().cross(R_A_hat_old).dot(wire2.rotation) / Math.pow(R_A_old.length(), 2) * area_value

            const R_A_new = absolute_place_1.clone().add(wire1.speed.clone().multiplyScalar(dt)).sub(area_place)
            const R_A_hat_new = R_A_new.clone().normalize()
            const new_flux = v_1.clone().cross(R_A_hat_new).dot(wire2.rotation) / Math.pow(R_A_new.length(), 2) * area_value

            wire2.voltage += (new_flux - old_flux) / dt
          }

          F_1_T.add(f_1)
          F_2_T.add(f_2)

          F_1_rotating_T.add(relative_place_1.clone().cross(f_1))
          F_2_rotating_T.add(relative_place_2.clone().cross(f_2))
        }
      }

      // add dx (doing f/(parts*parts) is the same as doing f*q1*q2)
      F_1_T.divideScalar(parts*parts)
      F_2_T.divideScalar(parts*parts)
      F_1_rotating_T.divideScalar(parts*parts)
      F_2_rotating_T.divideScalar(parts*parts)
      wire2.voltage /= parts

      // scale for better display
      wire2.voltage   *= 2_670.7946485
      const foce_const = 267_079_464.85
      F_1_T.multiplyScalar(foce_const)
      F_2_T.multiplyScalar(foce_const)
      F_1_rotating_T.multiplyScalar(foce_const*2/3)
      F_2_rotating_T.multiplyScalar(foce_const*2/3)

      // update total force arrows
      force_on_1.setDirection(F_1_T.clone().normalize())
      force_on_1.setLength(F_1_T.length(), F_1_T.length()*0.2, F_1_T.length()*0.2)
      force_on_2.setDirection(F_2_T.clone().normalize())
      force_on_2.setLength(F_2_T.length(), F_2_T.length()*0.2, F_2_T.length()*0.2)

      // update rotation force arrows
      curve_1.scale.setScalar(F_1_rotating_T.length() / 20500)
      curve_2.scale.setScalar(F_2_rotating_T.length() / 20500)
      curve_1.rotation.setFromVector3(vec_to_euler(F_1_rotating_T))
      curve_2.rotation.setFromVector3(vec_to_euler(F_2_rotating_T))

      // update voltage
      voltage.innerHTML = voltage.innerHTML.replace( new RegExp(": .*$","gm"),": " + (wire2.voltage).toFixed(2))
    }
  </script>
  <script async src="sensing_equation.js"></script>
  <script id="CanvasVideo" type="module" src="./canvas_video/animation.js"></script>
</body>

</html>